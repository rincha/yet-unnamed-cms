/**
  *
 * @author Rincha
 * @copyright Copyright © 2011-2013, Rincha, All rights reserved.
 */

(function() {
	tinymce.create('tinymce.plugins.RfilesPlugin', {
                reciver:false,
		init : function(ed, url) {
			// Register commands
			ed.addCommand('mceRfiles', function(ui,v) {   
				ed.windowManager.open({
					title : 'Файловый менеджер',
					file : url + '/rfiles.htm',
					width : 670,
					height : 500,
					inline : 1
				}, {
					plugin_url : url,
                                        callback:v
				});
			});

			// Register buttons
			ed.addButton('rfiles', {
				title : 'Файловый менеджер',
				cmd : 'mceRfiles',
				icon : 'fa fa fa-folder-open'     
			});
		},
		getInfo : function() {
			return {
				longname : 'Rincha File Manager',
				author : 'rincha',
				authorurl : 'http://mir-it.info',
				infourl : '',
				version : tinymce.majorVersion + "." + tinymce.minorVersion
			};
		}
	});

	// Register plugin
	tinymce.PluginManager.add('rfiles', tinymce.plugins.RfilesPlugin);
})();